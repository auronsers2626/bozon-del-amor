<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Buz√≥n del Coso</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h1 id="titulo">Buz√≥n del Coso</h1>

  <div id="contenedor">
    <img id="buzon" src="buzon.png" alt="Buz√≥n cerrado">
    
    <div id="carta" class="oculto">
      <div id="contenido-carta">
        <p>
          Mi amor<br><br>
          Asunto: Cartica de Hoyüíô<br><br>
          Duermo feliz sabiendo que tengo el privilegio de tener en mi vida la persona mas importante y especial del mundo.<br><br>
          Recuerda que siempre hare hasta lo imposible por verte feliz, hoy ma√±ana y por siempre. Mientras tanto recuerda esto<br><br>
          Te ama mas que a nada en el mundo, y ese sentimiento crece cada dia mas, lo eres todo para mi, mi Cosota 
        </p>
        <button id="borrar">Borrar</button>
      </div>
    </div>

    <p id="mensaje"></p>
    <div id="contador"></div>
  </div>

  <script>
    const buz√≥n = document.getElementById("buzon");
    const carta = document.getElementById("carta");
    const borrar = document.getElementById("borrar");
    const mensaje = document.getElementById("mensaje");
    const contador = document.getElementById("contador");

    const TIEMPO_ESPERA = 24 * 60 * 60 * 1000;

    function iniciarContador() {
      const ahora = Date.now();
      localStorage.setItem("siguienteCarta", ahora + TIEMPO_ESPERA);
      actualizarEstado();
    }

    function actualizarEstado() {
      const siguiente = localStorage.getItem("siguienteCarta");
      const ahora = Date.now();

      if (!siguiente || ahora >= siguiente) {
        mensaje.textContent = "¬°Tienes una nueva carta en el buz√≥n!";
        contador.textContent = "";
        buz√≥n.src = "buzon.png";
        buz√≥n.style.pointerEvents = "auto";
        buz√≥n.style.opacity = "1";
        carta.classList.add("oculto");
      } else {
        mensaje.textContent = "Mensaje entregado, Te amo demasiado mi ni√±a bonita. Vuelve en 24 horas."
        buz√≥n.src = "buzon.png";
        buz√≥n.style.pointerEvents = "none";
        buz√≥n.style.opacity = "0.6";
        carta.classList.add("oculto");
        actualizarContador(siguiente - ahora);
      }
    }

    function actualizarContador(tiempoRestante) {
      function formato(t) {
        const h = Math.floor(t / 3600);
        const m = Math.floor((t % 3600) / 60);
        const s = Math.floor(t % 60);
        return `${h}h ${m}m ${s}s`;
      }

      const intervalo = setInterval(() => {
        const siguiente = localStorage.getItem("siguienteCarta");
        const ahora = Date.now();
        const restante = Math.floor((siguiente - ahora) / 1000);

        if (restante <= 0) {
          clearInterval(intervalo);
          actualizarEstado();
        } else {
          contador.textContent = `‚è≥ ${formato(restante)} restantes`;
        }
      }, 1000);
    }

    buz√≥n.addEventListener("click", () => {
      carta.classList.remove("oculto");
      buz√≥n.style.display = "none";
    });

    borrar.addEventListener("click", () => {
      carta.classList.add("oculto");
      buz√≥n.style.display = "block";
      buz√≥n.src = "buzon.png";
      iniciarContador();
    });

    actualizarEstado();
  </script>
</body>
</html>


